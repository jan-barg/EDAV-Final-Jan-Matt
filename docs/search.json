[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Economic Growth and the Shrinking Family: A Cross-Country Exploration",
    "section": "",
    "text": "1 Introduction\nGlobally, birth rates have fallen to record lows, raising questions about how economic growth and prosperity shapes population trends. We were drawn to this topic because it sits at the intersection of economics and human behavior, how people‚Äôs choices about family size might shift as societies become wealthier, more urban, and more educated. The idea of a ‚Äúfertility collapse‚Äù is more than a simple demographic story; it has deep implications for labor markets, social systems, and long-term economic stability. By looking at how economic growth and fertility rates move together or apart across time and regions, we hope to better understand what drives these changes in population dynamics, and if there are any countries towards which we can look for in hopes of finding a reversal strategy.",
    "crumbs": [
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "2¬† Data",
    "section": "",
    "text": "2.1 Description\nOur data will come from the Federal Reserve Bank of St.¬†Louis‚Äôs FRED (Federal Reserve Economic Data) database. FRED compiles and maintains a wide range of economic and demographic indicators collected by government agencies and international organizations such as the World Bank, IMF, and OECD. The data are reported in structured time series format, usually at monthly, quarterly, or annual frequencies depending on the indicator. Each series includes detailed metadata on measurement units, coverage, and source methodology. For our project, we plan to use country-level data on fertility rates and economic growth indicators. One challenge we might face is that the time ranges and reporting frequencies can differ across datasets, which may require some cleaning and alignment before analysis. Since there is no multi-country dataset that covers all the nations we‚Äôre interested in, we will write a python script that downloads each investigated country‚Äôs data via API and then compiles a master dataset to work with. Here are example datasets for the United States of America that we would use. Many of these are available for multiple countries, hence we would scrape the same datasets, with identical units of measure, for multiple countries.\nFertility Rate ‚Äî FRED Series This data set is specifically from the World Bank. It is a time series dataset for the fertility rate in the United States as Births Per Woman from 1960 to 2023.\nConstant GDP Per Capita ‚Äî FRED Series This data set is comes from the World Bank. It is a time series dataset of the GDP per capita for the US from 1960 to 2025.\nEmployment-to-Population Ratio ‚Äî FRED Series This data set is from the World Bank. It is a time series dataset that shows the employment rate to population ratio as a percentage.\nFemale Labor Force Participation Rate (Ages 15+) ‚Äî World Bank Indicator This dataset comes from the World Bank, and it measures the percentage of women ages 15 and older who are part of the labor force‚Äîthat is, women who are either employed or actively seeking employment. It provides insight into female engagement in the economy and helps assess how social, economic, and policy factors influence gender participation in the workforce. The data are reported annually and are available for most countries beginning in 1990.\nGini Index ‚Äî FRED Series This data comes from the World Bank. The Gini index measures income inequality by calculating the area between the Lorenz curve and the line of perfect equality, where 0 represents perfect equality and 100 represents perfect inequality.\nTotal Population ‚Äî FRED Series This data, sourced from the World Bank, shows the country‚Äôs total population. It might be useful in investigating whether immigration policies compensate for below-replacement birthrates.\nNet Migration ‚Äî World Bank Indicator This data set comes from the World Bank and measures the net migration rate, defined as the difference between the number of immigrants and the number of emigrants for a country over a course of a year. Positive values indicate that more people are entering the country than leaving, while negative values indicate net emigration. This variable is particularly relevant for our analysis, as migration inflows can offset demographic decline caused by falling fertility rates. We also plan to examine possible lag effects between changes in migration and subsequent shifts in population growth.",
    "crumbs": [
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#data-collection-plan",
    "href": "data.html#data-collection-plan",
    "title": "2¬† Data",
    "section": "2.2 Data Collection Plan",
    "text": "2.2 Data Collection Plan\nFor the data collection, we will scrape data for selected countries and then assess data completeness, as the datasets vary in their time scope from country to country. Once we evaluate missing data, we aim to address the following questions:\n\nCountry Selection: Which countries provide a holistic overview of birth rates and their correlations with our selected economic and social indicators?\nTimeframe Selection: What timeframe allows us to gain valuable insights without having to impute a significant portion of the data (since heavy imputation could introduce inaccuracies)?\nHandling Missing Data: How should we address missing values while preserving accuracy and comparability to the highest extent possible?\n\nOur plan is to first compile the raw datasets via API (using Python) for each indicator and country, merge them into a master dataset, and then perform exploratory analysis on the combined and cleaned data.",
    "crumbs": [
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#country-selection",
    "href": "data.html#country-selection",
    "title": "2¬† Data",
    "section": "2.3 Country Selection",
    "text": "2.3 Country Selection\nTo gain a holistic global overview of the declining birthrate problem, we decided to focus on 13 countries, spanning all 7 continents, with varying GDP per capita levels. The investigated countries range from highly populated developing economies (e.g.¬†India) to aging advanced economies (e.g.¬†South Korea), and span different stages of demographic transition - from high fertility (Nigeria) to very low fertility (Japan).\nThe final country selection is structured as follows:\n\n\n\n\n\n\n\n\nRegion\nCountry\nRationale\n\n\n\n\nNorth America\nUnited States üá∫üá∏Canada üá®üá¶\nAdvanced economies with stable but below-replacement fertility; strong immigration inflows sustain population growth.\n\n\nEurope\nGermany üá©üá™Sweden üá∏üá™Poland üáµüá±\nContrasting European cases: Western vs.¬†Central; differing immigration policies, labor structures, and fertility recovery trends.\n\n\nAsia\nIndia üáÆüá≥China üá®üá≥Japan üáØüáµSouth Korea üá∞üá∑\nBroad spectrum of development and demographic stages, from rapid growth to severe aging and fertility decline.\n\n\nAfrica\nNigeria üá≥üá¨South Africa üáøüá¶\nHigh-fertility versus mid-transition economies; provide insight into the early stages of demographic transition.\n\n\nSouth America\nBrazil üáßüá∑\nEmerging economy experiencing a steady decline in fertility while maintaining moderate population growth.\n\n\nOceania\nAustralia üá¶üá∫\nImmigration-driven growth with below-replacement fertility; valuable case for lag analysis between migration and population stabilization.\n\n\n\n\n\nCode\nselected_countries &lt;- c(\n  \"United States of America\",\n  \"Canada\",\n  \"Germany\",\n  \"Sweden\",\n  \"Poland\",\n  \"India\",\n  \"China\",\n  \"Japan\",\n  \"South Korea\",\n  \"Nigeria\",\n  \"South Africa\",\n  \"Brazil\",\n  \"Australia\"\n)\n\nlibrary(sf)\nlibrary(rnaturalearth)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nworld &lt;- ne_countries(scale = \"medium\", returnclass = \"sf\")\n\nworld &lt;- world %&gt;%\n  mutate(\n    selected = ifelse(admin %in% selected_countries, \"Selected\", \"Not Selected\")\n  )\n\nggplot(world) +\n  geom_sf(aes(fill = selected), color = \"white\", size = 0.2) +\n  scale_fill_manual(values = c(\"Selected\" = \"#2c7fb8\", \"Not Selected\" = \"gray85\")) +\n  theme_minimal() +\n  labs(\n    title = \"Countries Selected for Analysis\",\n    fill = \"\"\n  ) +\n  theme(\n    legend.position = \"bottom\",\n    plot.title = element_text(size = 18, face = \"bold\")\n  )",
    "crumbs": [
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#data-collection",
    "href": "data.html#data-collection",
    "title": "2¬† Data",
    "section": "2.4 Data Collection",
    "text": "2.4 Data Collection\nThe data collection was done using API calls to the FRED and World Bank databases, using a python script, available here. The script created master-wide and master-long datasets, which will be used as the backbone of this project.",
    "crumbs": [
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#date-range-selection",
    "href": "data.html#date-range-selection",
    "title": "2¬† Data",
    "section": "2.5 Date Range Selection",
    "text": "2.5 Date Range Selection\n\n\nCode\nmaster_long &lt;- read_csv(file_path, show_col_types = FALSE) |&gt;\n  mutate(\n    year  = as.integer(year),\n    value = suppressWarnings(as.numeric(value))\n  )\n\n# Coverage by first/last non-missing\nmissing_summary &lt;- master_long |&gt;\n  group_by(country, variable) |&gt;\n  reframe({\n    yrs_nonmiss &lt;- year[is.finite(value) & !is.na(value)]\n    out &lt;- compute_year_gaps(yrs_nonmiss)\n    tibble(\n      first_non_missing_year = out$first_non_missing_year,\n      last_non_missing_year  = out$last_non_missing_year,\n      total_years_in_range   = out$total_years_in_range,\n      years_present          = out$years_present,\n      years_missing          = out$years_missing,\n      pct_years_missing      = out$pct_years_missing\n    )\n  }) |&gt;\n  ungroup() |&gt;\n  mutate(\n    date_range = ifelse(\n      is.na(first_non_missing_year) | is.na(last_non_missing_year),\n      NA_character_,\n      paste0(first_non_missing_year, \"‚Äì\", last_non_missing_year)\n    )\n  ) |&gt;\n  arrange(country, variable)\n\ncoverage_table &lt;- missing_summary |&gt;\n  mutate(\n    coverage = ifelse(\n      is.na(first_non_missing_year) | is.na(last_non_missing_year),\n      \"‚Äî\",\n      paste0(first_non_missing_year, \"‚Äì\", last_non_missing_year)\n    )\n  ) |&gt;\n  select(country, variable, coverage) |&gt;\n  pivot_wider(names_from = variable, values_from = coverage) |&gt;\n  arrange(country) |&gt;\n  rename(\n    `Country` = country,\n    `Employment-to-Population Ratio` = emp_to_pop,\n    `Fertility Rate` = fertility_rate,\n    `Female Labor Force Participation` = flfpr,\n    `GDP per Capita (constant)` = gdp_capita_const,\n    `Gini Index` = gini_index,\n    `Net Migration` = net_migration,\n    `Total Population` = total_population\n  )\n\ncoverage_table |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Coverage Range by Country and Variable\",\n    subtitle = \"Each cell shows the first and last available year\"\n  ) |&gt;\n  cols_label(\n    `Employment-to-Population Ratio` = \"Emp-to-Pop\",\n    `Fertility Rate` = \"Fertility\",\n    `Female Labor Force Participation` = \"FLFPR\",\n    `GDP per Capita (constant)` = \"GDP (const)\",\n    `Gini Index` = \"Gini\",\n    `Net Migration` = \"Migration\",\n    `Total Population` = \"Population\"\n  ) |&gt;\n  opt_table_font(font = \"Arial\") |&gt;\n  opt_all_caps() |&gt;\n  opt_table_lines()\n\n\n\n\n\n\n\n\nCoverage Range by Country and Variable\n\n\nEach cell shows the first and last available year\n\n\nCountry\nEmp-to-Pop\nFertility\nFLFPR\nGDP (const)\nGini\nMigration\nPopulation\n\n\n\n\nAUS\n1991‚Äì2024\n1960‚Äì2023\n1990‚Äì2024\n1960‚Äì2024\n1981‚Äì2020\n1960‚Äì2024\n1960‚Äì2024\n\n\nBRA\n1991‚Äì2024\n1960‚Äì2023\n1990‚Äì2024\n1960‚Äì2024\n1981‚Äì2023\n1960‚Äì2024\n1960‚Äì2024\n\n\nCAN\n1991‚Äì2024\n1960‚Äì2023\n1990‚Äì2024\n1960‚Äì2024\n1971‚Äì2021\n1960‚Äì2024\n1960‚Äì2024\n\n\nCHN\n1991‚Äì2024\n1960‚Äì2023\n1990‚Äì2024\n1960‚Äì2024\n1981‚Äì2022\n1960‚Äì2024\n1960‚Äì2024\n\n\nDEU\n1991‚Äì2024\n1960‚Äì2023\n1990‚Äì2024\n1960‚Äì2024\n1991‚Äì2020\n1960‚Äì2024\n1960‚Äì2024\n\n\nIND\n1991‚Äì2024\n1960‚Äì2023\n1990‚Äì2024\n1960‚Äì2024\n1977‚Äì2022\n1960‚Äì2024\n1960‚Äì2024\n\n\nJPN\n1991‚Äì2024\n1960‚Äì2023\n1990‚Äì2024\n1960‚Äì2024\n2008‚Äì2020\n1960‚Äì2024\n1960‚Äì2024\n\n\nKOR\n1991‚Äì2024\n1960‚Äì2023\n1990‚Äì2024\n1960‚Äì2023\n2006‚Äì2021\n1960‚Äì2024\n1960‚Äì2024\n\n\nNGA\n1991‚Äì2024\n1960‚Äì2023\n1990‚Äì2024\n1960‚Äì2024\n1985‚Äì2022\n1960‚Äì2024\n1960‚Äì2024\n\n\nPOL\n1991‚Äì2024\n1960‚Äì2023\n1990‚Äì2024\n1990‚Äì2024\n1985‚Äì2023\n1960‚Äì2024\n1960‚Äì2024\n\n\nSWE\n1991‚Äì2024\n1960‚Äì2023\n1990‚Äì2024\n1960‚Äì2024\n1975‚Äì2023\n1960‚Äì2024\n1960‚Äì2024\n\n\nUSA\n1991‚Äì2024\n1960‚Äì2023\n1990‚Äì2024\n1960‚Äì2024\n1963‚Äì2023\n1960‚Äì2024\n1960‚Äì2024\n\n\nZAF\n1991‚Äì2024\n1960‚Äì2023\n1990‚Äì2024\n1960‚Äì2024\n1993‚Äì2014\n1960‚Äì2024\n1960‚Äì2024\n\n\n\n\n\n\n\nAs shown by the data coverage table, the data differ in years covered across variables and countries. While certain variables (Fertility Rate, Net Migration, Total Population) span over 60 years for each country, others (most notably, Gini Index), have significantly shorter spans - for example, Japan‚Äôs Gini Index is only known for the 2008-2020 range.\nWhile 1960 is the first year of recorded observations for Fertility Rate, GDP per Capita, Net Migration, and Total Population, OECD indeces (Employment-to-Population Ratio and Female Labor Force Participation) are available starting from 1991 and 1990, respectively.\nConsidering these date ranges across countries and variables, we can explore the interactions between long-spanning variables as the primary part of this investigation, using Employment-to-Population ratio, Female Labor Force Participation Rate, and Gini Index as auxillary variables to contextualize and enrich the analysis where their data is available. With this hybrid approach, we can maximize both temporal coverage and analytical depth, enabling broad trend analysis while still leveraging the socio-economic context captured by shorter-range indicators.\nConsidering that almost all variables cover data up to 2023, we decide to cap our exploration at 2023, and stick to the following date ranges for:\n\n1960‚Äì2023 for Fertiity Rate, Constant GDP Per Capita, Net Migration, and Total Population\n1991‚Äì2023 for Employment-to-Population Ratio, Female Labor Force Participation Rate, and Gini Index",
    "crumbs": [
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2¬† Data",
    "section": "2.6 Missing value analysis",
    "text": "2.6 Missing value analysis\nWith the aforementioned date ranges in mind, we can proceed to analyzing missing values, for each variable, in its respective timespan.\n\n\nCode\nrange_filtered_data &lt;- master_long |&gt;\n  inner_join(var_start_years, by = \"variable\") |&gt;\n  filter(year &gt;= start_year, year &lt;= end_year) |&gt;\n  select(country, year, variable, value) |&gt;\n  arrange(country, variable, year)\n\nmissing_summary_window &lt;- range_filtered_data |&gt;\n  inner_join(var_start_years, by = \"variable\") |&gt;\n  group_by(country, variable, start_year) |&gt;\n  summarise(\n    years_present = n_distinct(year[is.finite(value) & !is.na(value)]),\n    .groups = \"drop_last\"\n  ) |&gt;\n  mutate(\n    end_year           = end_year,\n    total_years_window = end_year - start_year + 1L,\n    years_missing      = total_years_window - years_present,\n    pct_years_missing  = years_missing / total_years_window,\n    date_range         = paste0(start_year, \"‚Äì\", end_year)\n  ) |&gt;\n  ungroup() |&gt;\n  arrange(country, variable)\n\n# Aggregated view by variable\nmissing_by_variable &lt;- missing_summary_window |&gt;\n  group_by(variable) |&gt;\n  summarise(\n    countries_with_missing = sum(pct_years_missing &gt; 0, na.rm = TRUE),\n    mean_pct_missing       = mean(pct_years_missing, na.rm = TRUE),\n    max_pct_missing        = max(pct_years_missing, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |&gt;\n  arrange(desc(mean_pct_missing))\n\n# Heatmap with labels on missing cells\nplot_df &lt;- missing_summary_window |&gt;\n  select(country, variable, pct_years_missing) |&gt;\n  complete(country, variable, fill = list(pct_years_missing = 0)) |&gt;\n  mutate(\n    variable = fct_reorder(variable, pct_years_missing, .fun = mean, .desc = TRUE),\n    country  = fct_reorder(country,  pct_years_missing, .fun = mean, .desc = TRUE)\n  )\n\nggplot(plot_df, aes(x = variable, y = country, fill = pct_years_missing)) +\n  geom_tile(color = \"grey90\", linewidth = 0.3) +\n  geom_text(\n    data = subset(plot_df, pct_years_missing &gt; 0),\n    aes(label = paste0(round(pct_years_missing * 100, 1), \"%\")),\n    color = \"black\", size = 3\n  ) +\n  scale_fill_gradient(\n    limits = c(0, 1),\n    labels = percent,\n    name = \"% Missing (within window)\",\n    low = \"white\", high = \"firebrick\"\n  ) +\n  labs(\n    title = \"Missing coverage by country and variable (date window-aware)\",\n    x = \"Variable\",\n    y = \"Country\"\n  ) +\n  theme_minimal(base_size = 13) +\n  theme(\n    axis.text.x = element_text(angle = 40, hjust = 1),\n    panel.grid = element_blank()\n  )\n\n\n\n\n\n\n\n\n\nWe see that we are missing significant proportions of Gini Index values for most countries in the covered range. With &gt;40% missing, these are essentially incomputable and not viable for statistical analysis in combination with the other variables. Thus, we can treat the Gini Index as an extra variable that serves a contextual and interpretive role rather than a primary analytical one. To decide on this, we need to see if there are uninterrupted series of complete data for multiple countries. One more problem that we can observe in the data missingness table is the fact that 46.9% of the data between 1960 and 2023 is missing for GDP per Capita in Poland. Poland‚Äôs GDP data was only reliably reported after 1989, when the communist regime fell in the country. Thus, historical GDP data prior to the early 1990s is often incomplete or unavailable due to differences in accounting standards, data collection methods, and limited integration with international databases such as the World Bank. Therefore, for Poland, we will retain this gap rather than imputing values to preserve data consistency across sources.\n\n\nCode\ngini_start &lt;- 1991L\ngini_end   &lt;- 2023L\n\ngini_countries &lt;- range_filtered_data |&gt;\n  filter(variable == \"gini_index\") |&gt;\n  distinct(country)\n\ngini_grid &lt;- gini_countries |&gt;\n  crossing(year = gini_start:gini_end)\n\ngini_long &lt;- gini_grid |&gt;\n  left_join(\n    range_filtered_data |&gt;\n      filter(variable == \"gini_index\") |&gt;\n      transmute(country, year, value = as.numeric(value)),\n    by = c(\"country\", \"year\")\n  ) |&gt;\n  mutate(present = ifelse(is.finite(value) & !is.na(value), \"Present\", \"Missing\"))\n\ngini_order &lt;- gini_long |&gt;\n  group_by(country) |&gt;\n  summarise(pct_missing = mean(present == \"Missing\"), .groups = \"drop\") |&gt;\n  arrange(desc(pct_missing))\n\ngini_long &lt;- gini_long |&gt;\n  mutate(country = factor(country, levels = gini_order$country))\n\nggplot(gini_long, aes(x = year, y = country, fill = present)) +\n  geom_tile(color = \"white\", linewidth = 0.15) +\n  scale_x_continuous(breaks = seq(gini_start, gini_end, by = 4)) +\n  scale_fill_manual(values = c(Missing = \"grey85\", Present = \"steelblue\")) +\n  labs(\n    title = \"Gini Index availability by country and year\",\n    subtitle = \"Window: 1991‚Äì2023 (blue = data present, gray = missing)\",\n    x = \"Year\", y = \"Country\", fill = NULL\n  ) +\n  theme_minimal(base_size = 13) +\n  theme(\n    panel.grid = element_blank(),\n    axis.text.x = element_text(angle = 40, hjust = 1)\n  )\n\n\n\n\n\n\n\n\n\nSeeing the missingness patterns of Gini Index, we decided not to use it - with no blocks of non-missing values spanning similar years across multiple countries, we deem the variable not too useful in this analysis.\n\n\nCode\n# Create a folder for processed data if it doesn‚Äôt exist\nif (!dir.exists(\"./data-gathering/data/processed\")) {\n  dir.create(\"./data-gathering/data/processed\", recursive = TRUE)\n}\n\n# Save the cleaned, filtered dataset\nwrite_csv(range_filtered_data, \"./data-gathering/data/processed/range_filtered_data.csv\")\n\n# also save RDS\nsaveRDS(range_filtered_data, \"./data-gathering/data/processed/range_filtered_data.rds\")",
    "crumbs": [
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "3¬† Results",
    "section": "",
    "text": "3.1 Global fertility trajectories",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#global-fertility-trajectories",
    "href": "results.html#global-fertility-trajectories",
    "title": "3¬† Results",
    "section": "",
    "text": "3.1.1 Fertility over time\n\n\nCode\nfertility_data &lt;- master_long |&gt;\n  filter(\n    variable == \"fertility_rate\",\n    year &gt;= 1960,\n    year &lt;= end_year\n  ) |&gt;\n  left_join(country_lookup, by = \"country\")\n\ncountry_order &lt;- fertility_data |&gt;\n  group_by(country_name) |&gt;\n  summarize(avg_fertility = mean(value, na.rm = TRUE)) |&gt;\n  arrange(desc(avg_fertility)) |&gt;\n  pull(country_name)\n\nfertility_long &lt;- master_long |&gt;\n  filter(\n    variable == \"fertility_rate\",\n    year &gt;= 1960,\n    year &lt;= end_year\n  ) |&gt;\n  left_join(country_lookup, by = \"country\") |&gt;\n  # use the same ordering as in the heatmap\n  mutate(\n    country_name = factor(country_name, levels = (country_order))\n  )\n\nggplot(fertility_long, aes(x = year, y = value)) +\n  # replacement line\n  geom_hline(\n    yintercept = 2.1,\n    linetype   = \"dashed\",\n    color      = \"grey40\"\n  ) +\n  geom_line(color = \"#2c7fb8\", linewidth = 0.7) +\n  facet_wrap(~ country_name, ncol = 4) +\n  scale_y_continuous(\n    \"Fertility rate (births per woman)\",\n    limits = c(0, NA)\n  ) +\n  scale_x_continuous(\n    \"Year\",\n    breaks = seq(1960, 2020, by = 20)\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(\n    strip.text = element_text(face = \"bold\"),\n    plot.title = element_text(face = \"bold\", size = 16),\n    panel.grid.minor = element_blank()\n  ) +\n  labs(\n    title = \"Fertility has declined across all selected countries\",\n    subtitle = \"Dashed line shows the replacement level of 2.1 births per woman\"\n  )\n\n\n\n\n\nFertility rate trajectories (births per woman) for 13 selected countries. The dashed line marks the replacement level of 2.1 births per woman.\n\n\n\n\nFor every country in the analysis, we see a decline in fertility rates between 1960 and 2023. While the change varies across the countries, it is interesting to see that all countries except Japan had fertility levels above the replacement rate - and only Nigeria and South Africa (barely!) managed to sustain fertility levels above 2.1 births per woman. The pattern is strikingly similar for Germany, Japan, Sweden, and Poland, which were just around replacement level 65 years ago, and have fallen much below it ever since. The decline in fertility is quicker in the US and Australia, and even more so across the first 5 countries in the figure above. Out of these, China marks an interesting case: it is the only country that exhibited significant positive growth in fertility rates throughout the 60+ year period. This could stem from several reasons, but the most likely cause seems to be the end of the 1959-1961 Great Chinese Famine. After living conditions stabilized in the country, the citizens were more likely to decide to have children. Because China had not yet implemented fertility-control policies, this rebound appears prominently in the data.\n\n\n3.1.2 Fertility rate heat map\n\n\nCode\n# compute average fertility over the entire period\n\nfertility_data &lt;- fertility_data |&gt;\n  mutate(\n    country_name = factor(country_name, levels = rev(country_order))\n  )\n\nggplot(fertility_data, aes(x = year, y = country_name, fill = value)) +\n  geom_tile() +\n  scale_x_continuous(\n    \"Year\",\n    breaks = seq(1960, 2020, by = 10),\n    expand = expansion(mult = c(0, 0))\n  ) +\n  scale_fill_viridis_c(\n    name = \"Births per\\nwoman\",\n    option = \"magma\",\n    direction = -1\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(\n    panel.grid = element_blank(),\n    axis.title.y = element_blank(),\n    axis.text.y  = element_text(face = \"bold\"),\n    plot.title   = element_text(size = 16, face = \"bold\")\n  ) +\n  labs(\n    title = \"Fertility is converging across countries over time\"\n  )\n\n\n\n\n\nFertility rates across countries and years, with countries ordered by average fertility.\n\n\n\n\nIn the fertility heat map, we see patterns that converge towards lower fertility, with some interruptions of darker shades. Most notably, Nigeria, which exhibits by far the highest fertility of the 13 countries, is seeing a decline in its fertility. On the other hand, South Korea has been seeing the lowest rates of child birth since the start of the millennium.",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#fertility-vs.-other-indicators",
    "href": "results.html#fertility-vs.-other-indicators",
    "title": "3¬† Results",
    "section": "3.2 Fertility vs.¬†other indicators",
    "text": "3.2 Fertility vs.¬†other indicators\n\n3.2.1 GDP per capita over time\n\n\nCode\n# compute median GDP per capita per country for ordering\ngdp_order &lt;- master_long |&gt;\n  filter(\n    variable == \"gdp_capita_const\",\n    year &gt;= 1960,\n    year &lt;= end_year\n  ) |&gt;\n  left_join(country_lookup, by = \"country\") |&gt;\n  group_by(country_name) |&gt;\n  summarize(median_gdp = median(value, na.rm = TRUE)) |&gt;\n  arrange(desc(median_gdp)) |&gt;\n  pull(country_name)\n\n# apply ordering\ngdp_long &lt;- master_long |&gt;\n  filter(\n    variable == \"gdp_capita_const\",\n    year &gt;= 1960,\n    year &lt;= end_year\n  ) |&gt;\n  left_join(country_lookup, by = \"country\") |&gt;\n  mutate(country_name = factor(country_name, levels = gdp_order))\n\nggplot(gdp_long, aes(x = year, y = value)) +\n  geom_line(color = \"#1b9e77\", linewidth = 0.7) +\n  facet_wrap(~ country_name, ncol = 4, scales = \"free_y\") +\n  scale_y_continuous(\n    \"Constant GDP per capita (USD)\",\n    labels = scales::label_number(accuracy = 1, big.mark = \",\")\n  ) +\n  scale_x_continuous(\n    \"Year\",\n    breaks = seq(1960, 2020, by = 20)\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(\n    strip.text       = element_text(face = \"bold\"),\n    plot.title       = element_text(face = \"bold\", size = 16),\n    panel.grid.minor = element_blank()\n  ) +\n  labs(\n    title = \"GDP per capita over time\"\n  )\n\n\n\n\n\nConstant GDP per capita (linear scale) for 13 selected countries.\n\n\n\n\nFor all the 13 countries, excluding South Africa and Nigeria, we see continuous GDP per capita growth. The United States, Canada, Sweden, Australia, Germany, and Japan all show steady and sustained income growth over the entire period. South Korea stands out as the strongest ‚Äúgrowth miracle,‚Äù rising from extremely low income levels in 1960 to high-income status by 2020. Middle-income countries such as Brazil and South Africa show more uneven patterns: periods of growth followed by stagnation or declines, reflecting political and economic instability. Nigeria‚Äôs GDP per capita is highly volatile, with several swings, likely caused by oil price cycles and structural instability within the country. Nevertheless, each country has much higher GDP per capita in 2023 than in 1960.\nNOTE: We tried to group countries into three GDP tiers and give each tier its own y-scale using ggh4x. Although the method should work in theory, it produced layout glitches (empty panels, misaligned strips, overlapping axes) in our setup. After several failed fixes, we reverted to a simpler, reliable approach: a standard facet plot with countries ordered by median GDP.\n\n\n3.2.2 Fertility vs GDP per capita\n\n\nCode\n#| label: fert-gdp-facets\n#| fig-cap: \"Relationship between fertility and GDP per capita, one panel per country.\"\n\nfert_gdp &lt;- master_long |&gt;\n  filter(\n    variable %in% c(\"fertility_rate\", \"gdp_capita_const\"),\n    year &gt;= 1960,\n    year &lt;= end_year\n  ) |&gt;\n  select(country, year, variable, value) |&gt;\n  tidyr::pivot_wider(names_from = variable, values_from = value) |&gt;\n  left_join(country_lookup, by = \"country\") |&gt;\n  filter(!is.na(fertility_rate), !is.na(gdp_capita_const))\n\nggplot(fert_gdp, aes(x = gdp_capita_const, y = fertility_rate)) +\n  geom_point(alpha = 0.4, color = \"#2c7fb8\", size = 1) +\n  geom_smooth(method = \"loess\", se = FALSE, linewidth = 0.7, color = \"#d95f02\") +\n  facet_wrap(~ country_name, scales = \"free\") +\n  scale_x_log10(\n    \"Constant GDP per capita (log scale)\",\n    labels = scales::label_number(scale_cut = scales::cut_si(\"\"))\n  ) +\n  scale_y_continuous(\"Fertility rate (births per woman)\") +\n  theme_minimal(base_size = 12) +\n  theme(\n    strip.text = element_text(face = \"bold\"),\n    plot.title = element_text(size = 16, face = \"bold\")\n  ) +\n  labs(\n    title = \"Fertility declines as GDP per capita rises\",\n    subtitle = \"Each panel shows a country's trajectory across 1960‚Äì2023\"\n  )\n\n\n\n\n\n\n\n\n\nWhen plotting Fertility Rates vs GDP per capita, we see constant decline for most countries. This does not necessarily imply causation, as shown by South Africa and Nigeria: the two countries that experienced high volatility exhibit high irregularity in the plotted patterns, showing that quick significant changes in GDP per capita do not go together with similarly swift changes in fertility rates.\n\n\nCode\n# #| label: gapminder-fertility-gdp\n# #| eval: true\n# #| message: false\n# #| warning: false\n# \n# library(gganimate)\n# library(gifski)\n# library(dplyr)\n# \n# gapminder_data &lt;- master_long |&gt;\n#   filter(\n#     variable %in% c(\"fertility_rate\", \"gdp_capita_const\", \"total_population\"),\n#     year &gt;= 1960,\n#     year &lt;= end_year\n#   ) |&gt;\n#   select(country, year, variable, value) |&gt;\n#   tidyr::pivot_wider(\n#     names_from  = variable,\n#     values_from = value\n#   ) |&gt;\n#   left_join(country_lookup, by = \"country\") |&gt;\n#   # keep rows with both fertility & GDP present\n#   filter(!is.na(fertility_rate), !is.na(gdp_capita_const))\n# \n# # pull out Nigeria rows (might be 0 if data is missing!)\n# nigeria_data &lt;- gapminder_data |&gt;\n#   filter(country == \"Nigeria\")\n# \n# # base plot\n# p_gapminder &lt;- ggplot(\n#   gapminder_data,\n#   aes(\n#     x     = gdp_capita_const,\n#     y     = fertility_rate,\n#     size  = total_population / 1e6,   # millions\n#     color = region,\n#     group = country\n#   )\n# ) +\n#   geom_point(alpha = 0.6) +\n#   scale_x_log10(\n#     \"Constant GDP per capita (log scale)\",\n#     labels = scales::label_number(scale_cut = scales::cut_si(\"\"))\n#   ) +\n#   scale_y_continuous(\n#     \"Fertility rate (births per woman)\",\n#     limits = c(0, NA)\n#   ) +\n#   scale_size_continuous(\n#     name  = \"Population (millions)\",\n#     range = c(2, 10),\n#     guide = \"legend\"\n#   ) +\n#   theme_minimal(base_size = 12) +\n#   theme(\n#     legend.position = \"right\",\n#     plot.title      = element_text(size = 16, face = \"bold\"),\n#     plot.subtitle   = element_text(size = 11)\n#   ) +\n#   labs(\n#     title    = \"Fertility vs GDP per Capita Over Time\",\n#     subtitle = \"Year: {frame_time}\",\n#     color    = \"Region\"\n#   )\n# \n# # only add highlight + label if Nigeria actually has data\n# if (nrow(nigeria_data) &gt; 0) {\n#   p_gapminder &lt;- p_gapminder +\n#     geom_point(\n#       data  = nigeria_data,\n#       aes(\n#         x     = gdp_capita_const,\n#         y     = fertility_rate,\n#         size  = total_population / 1e6,\n#         group = country\n#       ),\n#       inherit.aes = FALSE,\n#       shape = 21,\n#       fill  = \"gold\",\n#       color = \"black\",\n#       stroke = 1.1,\n#       alpha  = 0.95,\n#       show.legend = FALSE\n#     ) +\n#     geom_text(\n#       data  = nigeria_data,\n#       aes(\n#         x     = gdp_capita_const,\n#         y     = fertility_rate,\n#         label = \"Nigeria\",\n#         group = country\n#       ),\n#       inherit.aes = FALSE,\n#       vjust = -1,\n#       fontface = \"bold\",\n#       show.legend = FALSE\n#     )\n# }\n# \n# p_gapminder &lt;- p_gapminder +\n#   transition_time(year) +\n#   ease_aes(\"linear\")\n# \n# # animate and save as GIF\n# anim &lt;- animate(\n#   p_gapminder,\n#   renderer = gifski_renderer(),\n#   width    = 800,\n#   height   = 600,\n#   res      = 120,\n#   fps      = 10,\n#   duration = 12\n# )\n# \n# if (!dir.exists(\"figs\")) dir.create(\"figs\")\n# anim_save(\"figs/gapminder_fertility_gdp.gif\", animation = anim)\n\n\n\n\n3.2.3 Yearly snapshots of GDP per capita, population, and fertility\n In this animated graph, one can track changes in fertility, GDP per capita, and population over time. Each frame represents one year between 1960 and 2023, and each dot represents one country. As the dot‚Äôs size grows, so does the country‚Äôs population. As it moves to the right, its GDP per capita rises, and as it moves down, its fertility decreases. For example, the brown dot that jumps up and down at the beginning, then sharply falls towards the bottom is China - as the animations reflects its quick changes in fertility described above. Most countries, particularly European and North American, seem to gravitate towards the bottom right corner (high GDP per capita and low fertility). They also, at least at the start of the animation, grow in size, indicating increasing population. As mentioned above, Nigeria (red dot at the top) stands as the clearest exception.\n\n\n3.2.4 Fertility vs female labor force participation\n\n\nCode\nfert_flfpr &lt;- master_long |&gt;\n  filter(\n    variable %in% c(\"fertility_rate\", \"flfpr\"),\n    year &gt;= 1990,              # FLFPR starts around 1990\n    year &lt;= end_year\n  ) |&gt;\n  select(country, year, variable, value) |&gt;\n  tidyr::pivot_wider(names_from = variable, values_from = value) |&gt;\n  left_join(country_lookup, by = \"country\") |&gt;\n  filter(!is.na(fertility_rate), !is.na(flfpr))\n\nggplot(\n  fert_flfpr,\n  aes(\n    x      = flfpr,\n    y      = fertility_rate,\n    group  = country_name\n  )\n) +\n  geom_path(aes(color = year), linewidth = 0.7, alpha = 0.8) +\n  geom_point(aes(color = year), size = 1.2, alpha = 0.8) +\n  scale_color_viridis_c(\n    name = \"Year\",\n    option = \"plasma\"\n  ) +\n  facet_wrap(~ country_name, scales = \"free\") +\n  scale_x_continuous(\"Female labor force participation rate (%)\") +\n  scale_y_continuous(\"Fertility rate (births per woman)\") +\n  theme_minimal(base_size = 12) +\n  theme(\n    strip.text   = element_text(face = \"bold\"),\n    plot.title   = element_text(size = 16, face = \"bold\"),\n    panel.grid.minor = element_blank()\n  ) +\n  labs(\n    title    = \"Fertility and female labor force participation\",\n    subtitle = \"Each panel shows a country's trajectory since 1990, with color indicating year\"\n  )\n\n\n\n\n\nRelationship between fertility and female labor force participation, with time evolution shown by connected points.\n\n\n\n\nWhen investigating fertility rates against female labor force participation rates (some speculate women tend to give less births the more they work), we cannot see any clear pattern. For example, in China, higher FLFPR coincides with higher fertility, while in Brazil, the opposite is the case. We therefore cannot confirm the hypothesis of female labor force participation having a negative effect on fertility rate.\n\n\n3.2.5 Fertility vs employment-to-population ratio\n\n\nCode\nfert_emp &lt;- master_long |&gt;\n  filter(\n    variable %in% c(\"fertility_rate\", \"emp_to_pop\"),\n    year &gt;= 1991,                # employment-to-pop starts around 1991\n    year &lt;= end_year\n  ) |&gt;\n  select(country, year, variable, value) |&gt;\n  tidyr::pivot_wider(\n    names_from  = variable,\n    values_from = value\n  ) |&gt;\n  left_join(country_lookup, by = \"country\") |&gt;\n  filter(\n    !is.na(fertility_rate),\n    !is.na(emp_to_pop)\n  )\n\nggplot(\n  fert_emp,\n  aes(\n    x     = emp_to_pop,\n    y     = fertility_rate,\n    group = country_name\n  )\n) +\n  geom_path(aes(color = year), linewidth = 0.7, alpha = 0.8) +\n  geom_point(aes(color = year), size = 1.2, alpha = 0.8) +\n  scale_color_viridis_c(\n    name   = \"Year\",\n    option = \"plasma\"\n  ) +\n  facet_wrap(~ country_name, scales = \"free\") +\n  scale_x_continuous(\"Employment-to-population ratio (%)\") +\n  scale_y_continuous(\"Fertility rate (births per woman)\") +\n  theme_minimal(base_size = 12) +\n  theme(\n    strip.text       = element_text(face = \"bold\"),\n    plot.title       = element_text(size = 16, face = \"bold\"),\n    panel.grid.minor = element_blank()\n  ) +\n  labs(\n    title    = \"Fertility vs overall employment rates\",\n    subtitle = \"Each panel shows a country's trajectory since 1991, with color indicating year\"\n  )\n\n\n\n\n\nFertility and employment-to-population ratio\n\n\n\n\nAs with the FLFPR vs fertility graph, the fertility vs overall employment rate graph does not allow us to draw any sensible conclusions. We therefore cannot speculate, either, that societies where more people work have higher or lower fertility rates.",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#migration-population-growth-and-fertility",
    "href": "results.html#migration-population-growth-and-fertility",
    "title": "3¬† Results",
    "section": "3.3 Migration, population growth, and fertility",
    "text": "3.3 Migration, population growth, and fertility\n\n\nCode\n# focus countries (by country code)\nfocus_countries &lt;- c(\"USA\", \"CAN\", \"AUS\", \"POL\", \"JPN\", \"KOR\")\n\npop_mig &lt;- master_long |&gt;\n  filter(\n    country %in% focus_countries,\n    variable %in% c(\"total_population\", \"net_migration\"),\n    year &gt;= 1960,\n    year &lt;= end_year\n  ) |&gt;\n  select(country, year, variable, value) |&gt;\n  tidyr::pivot_wider(\n    names_from  = variable,\n    values_from = value\n  ) |&gt;\n  arrange(country, year) |&gt;\n  group_by(country) |&gt;\n  # population growth % from lagged population\n  mutate(\n    pop_growth_pct = (total_population - dplyr::lag(total_population)) /\n      dplyr::lag(total_population) * 100\n  ) |&gt;\n  ungroup() |&gt;\n  left_join(country_lookup, by = \"country\") |&gt;\n  filter(!is.na(pop_growth_pct), !is.na(net_migration))\n\n# standardize within each country so we can overlay on one y-axis\npop_mig_scaled &lt;- pop_mig |&gt;\n  group_by(country_name) |&gt;\n  mutate(\n    mig_scaled  = as.numeric(scale(net_migration)),\n    popg_scaled = as.numeric(scale(pop_growth_pct))\n  ) |&gt;\n  ungroup() |&gt;\n  tidyr::pivot_longer(\n    cols      = c(mig_scaled, popg_scaled),\n    names_to  = \"series\",\n    values_to = \"value\"\n  ) |&gt;\n  mutate(\n    series = dplyr::recode(\n      series,\n      mig_scaled  = \"Net migration (standardized)\",\n      popg_scaled = \"Population growth % (standardized)\"\n    )\n  )\n\nggplot(pop_mig_scaled, aes(x = year, y = value, color = series)) +\n  geom_hline(yintercept = 0, linetype = \"dotted\", color = \"grey60\") +\n  geom_line(linewidth = 0.8, alpha = 0.9) +\n  facet_wrap(~ country_name, ncol = 3) +\n  scale_x_continuous(\n    \"Year\",\n    breaks = seq(1960, 2020, by = 10)\n  ) +\n  scale_y_continuous(\"Standardized value\") +\n  scale_color_manual(\n    name   = \"\",\n    values = c(\n      \"Net migration (standardized)\"          = \"#1b9e77\",\n      \"Population growth % (standardized)\"    = \"#d95f02\"\n    )\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(\n    strip.text       = element_text(face = \"bold\"),\n    plot.title       = element_text(size = 16, face = \"bold\"),\n    panel.grid.minor = element_blank(),\n    legend.position  = \"bottom\"\n  ) +\n  labs(\n    title    = \"Migration and population growth together\",\n    subtitle = \"Each panel shows standardized net migration and population growth rates since 1960\"\n  )\n\n\n\n\n\nStandardized net migration and population growth over time for six selected countries.\n\n\n\n\nAcross immigration-heavy countries like the Canada, and Australia, net migration and population growth tend to move together, suggesting that inflows increasingly offset low fertility. In contrast, Japan and South Korea show little alignment, with low or negative migration accompanying steadily declining population growth. Poland sits in between, with migration swings. The very notable spike in immigration to Poland occurs right at the start of the Russian invasion of Ukraine, during which, Poland received ca. 1 million Ukrainian refugees.\n\n\nCode\nfocus_countries &lt;- c(\"USA\", \"CAN\", \"AUS\", \"POL\", \"JPN\", \"KOR\")\n\npop_mig_lags &lt;- master_long |&gt;\n  filter(\n    country %in% focus_countries,\n    variable %in% c(\"total_population\", \"net_migration\"),\n    year &gt;= 1960,\n    year &lt;= end_year\n  ) |&gt;\n  select(country, year, variable, value) |&gt;\n  tidyr::pivot_wider(\n    names_from  = variable,\n    values_from = value\n  ) |&gt;\n  arrange(country, year) |&gt;\n  group_by(country) |&gt;\n  mutate(\n    pop_growth_pct = (total_population - dplyr::lag(total_population)) /\n      dplyr::lag(total_population) * 100\n  ) |&gt;\n  ungroup() |&gt;\n  left_join(country_lookup, by = \"country\")\n\n# create future population growth for different lags\npop_mig_lags_long &lt;- pop_mig_lags |&gt;\n  group_by(country) |&gt;\n  mutate(\n    pop_growth_t1 = dplyr::lead(pop_growth_pct, 1),\n    pop_growth_t3 = dplyr::lead(pop_growth_pct, 3),\n    pop_growth_t5 = dplyr::lead(pop_growth_pct, 5)\n  ) |&gt;\n  ungroup() |&gt;\n  select(\n    country, country_name, year, net_migration,\n    pop_growth_t1, pop_growth_t3, pop_growth_t5\n  ) |&gt;\n  tidyr::pivot_longer(\n    cols      = starts_with(\"pop_growth_t\"),\n    names_to  = \"lag_label\",\n    values_to = \"pop_growth_future\"\n  ) |&gt;\n  mutate(\n    lag_years = dplyr::recode(\n      lag_label,\n      \"pop_growth_t1\" = \"t + 1 year\",\n      \"pop_growth_t3\" = \"t + 3 years\",\n      \"pop_growth_t5\" = \"t + 5 years\"\n    ),\n    lag_years = factor(\n      lag_years,\n      levels = c(\"t + 1 year\", \"t + 3 years\", \"t + 5 years\")\n    )\n  ) |&gt;\n  filter(\n    !is.na(net_migration),\n    !is.na(pop_growth_future)\n  )\n\nggplot(\n  pop_mig_lags_long,\n  aes(x = net_migration, y = pop_growth_future)\n) +\n  geom_point(alpha = 0.5, size = 1) +\n  geom_smooth(method = \"lm\", se = FALSE, linewidth = 0.7, color = \"#d95f02\") +\n  facet_grid(lag_years ~ country_name, scales = \"free\") +\n  scale_x_continuous(\n    \"Net migration\",\n    labels = scales::label_number(scale_cut = scales::cut_si(\"\"))\n  ) +\n  scale_y_continuous(\"Population growth rate (%) in future year\") +\n  theme_minimal(base_size = 12) +\n  theme(\n    strip.text       = element_text(face = \"bold\"),\n    plot.title       = element_text(size = 16, face = \"bold\"),\n    panel.grid.minor = element_blank()\n  ) +\n  labs(\n    title    = \"Migration today and population growth tomorrow\",\n    subtitle = \"Each point is a country-year; rows show different horizons (1, 3, and 5 years ahead)\"\n  )\n\n\n\n\n\nNet migration today vs population growth in 1, 3, and 5 years, for six selected countries.\n\n\n\n\nAcross the countries shown, only immigration-heavy economies like Canada and Australia display a clear link between today‚Äôs migration levels and population growth in future years, as their trend lines are flat or slightly positive, suggesting that, there, migration meaningfully contributes to demographic expansion. In contrast, Japan, South Korea, and Poland show negative or near-zero relationships: population growth continues to fall regardless of migration because very low fertility and aging dominate overall population change. The broader takeaway is that migration matters only where the migration flows are large relative to the population. In low-migration societies, migration is simply too small to offset structural demographic decline. A final caveat is that these plots compare migration levels with growth rates, which can produce weak or spurious correlations because migration is volatile year-to-year while population growth adjusts slowly over time.",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#correlation-and-structural-patterns",
    "href": "results.html#correlation-and-structural-patterns",
    "title": "3¬† Results",
    "section": "3.4 Correlation and structural patterns",
    "text": "3.4 Correlation and structural patterns\n\n\nCode\ncorr_vars &lt;- c(\n  \"fertility_rate\",\n  \"gdp_capita_const\",\n  \"flfpr\",\n  \"emp_to_pop\",\n  \"net_migration\"\n)\n\ncorr_data &lt;- master_long |&gt;\n  filter(variable %in% corr_vars) |&gt;\n  select(country, year, variable, value) |&gt;\n  tidyr::pivot_wider(\n    names_from = variable,\n    values_from = value\n  ) |&gt;\n  left_join(country_lookup, by = \"country\")\n\ncorr_60_90 &lt;- corr_data |&gt;\n  filter(year &gt;= 1960, year &lt;= 1990)\n\ncorr_90_23 &lt;- corr_data |&gt;\n  filter(year &gt; 1990, year &lt;= 2023)\n\nnum_vars &lt;- corr_vars   # fertility_rate, gdp_capita_const, flfpr, emp_to_pop, net_migration\n\ncor_mat_60_90 &lt;- corr_60_90 |&gt;\n  select(all_of(num_vars)) |&gt;\n  cor(use = \"pairwise.complete.obs\")\n\ncor_mat_90_23 &lt;- corr_90_23 |&gt;\n  select(all_of(num_vars)) |&gt;\n  cor(use = \"pairwise.complete.obs\")\n\n\nplot_corr_heatmap &lt;- function(cor_mat, title_text) {\n\n  cor_df &lt;- as.data.frame(cor_mat)\n  cor_df$var1 &lt;- rownames(cor_df)\n\n  long_cor &lt;- tidyr::pivot_longer(\n    cor_df,\n    cols = -var1,\n    names_to = \"var2\",\n    values_to = \"correlation\"\n  )\n\n  ggplot(long_cor, aes(x = var1, y = var2, fill = correlation)) +\n    geom_tile(color = \"white\") +\n    scale_fill_distiller(\n      palette = \"RdBu\",\n      direction = 1,\n      limits = c(-1, 1),\n      name = \"Correlation\"\n    ) +\n    coord_fixed() +\n    theme_minimal(base_size = 12) +\n    theme(\n      axis.text.x = element_text(angle = 45, hjust = 1),\n      axis.text.y = element_text(face = \"bold\"),\n      plot.title  = element_text(face = \"bold\", size = 16)\n    ) +\n    labs(\n      title = title_text,\n      x = \"\",\n      y = \"\"\n    )\n}\n\n\nplot_corr_heatmap(cor_mat_60_90, \"Correlation Structure (1960‚Äì1990)\")\n\n\n\n\n\n\n\n\n\nWe see that between 1960 and 1990, the strongest correlation between two of the investigated variables is the negative one between GDP per capita and fertility rate - which is not at all surprising, considering the graphs previously created. For most other pairs of variables, we cannot really observe a strong correlation, apart from a slightly positive one, between GDP per capita and net migration. Note: Employment-to-population ratio was not available for most of these years, thus it produces no correlations with other variables.\n\n\nCode\nplot_corr_heatmap(cor_mat_90_23, \"Correlation Structure (1990‚Äì2023)\")\n\n\n\n\n\n\n\n\n\nWhen investigating the same correlations in the years 1990-2023, we see a few changes. In these years: - The negative correlation between GDP per capita and fertility rate was less pronounced - Conversely, the positive correlation between net migration and GDP per capita is stronger - There is a strong positive correlation between employment-to-population ratio and female labor force participation ratio\n\n\nCode\n# variables to use\nvars_pca &lt;- c(\n  \"fertility_rate\",\n  \"gdp_capita_const\",\n  \"flfpr\",\n  \"emp_to_pop\",\n  \"net_migration\"\n)\n\n# pivot wider and average across 1990‚Äì2023\npca_data &lt;- master_long |&gt;\n  filter(\n    variable %in% vars_pca,\n    year &gt;= 1990,\n    year &lt;= end_year\n  ) |&gt;\n  select(country, year, variable, value) |&gt;\n  tidyr::pivot_wider(names_from = variable, values_from = value) |&gt;\n  left_join(country_lookup, by = \"country\") |&gt;\n  group_by(country_name, region) |&gt;\n  summarize(across(all_of(vars_pca), ~ mean(.x, na.rm = TRUE)), .groups = \"drop\")\n\nlibrary(ggfortify)\n\n# PCA on scaled variables\npca_model &lt;- prcomp(\n  pca_data |&gt; select(all_of(vars_pca)),\n  scale = TRUE,\n  center = TRUE\n)\n# hierarchical clustering on scaled variables\ndist_mat &lt;- pca_data |&gt;\n  select(all_of(vars_pca)) |&gt;\n  scale() %&gt;%\n  dist()\n\nhc &lt;- hclust(dist_mat, method = \"ward.D2\")\n\nplot(\n  hc,\n  labels = pca_data$country_name,\n  main = \"Hierarchical Clustering of Countries (Avg. 1990‚Äì2023)\",\n  xlab = \"\",\n  sub = \"\",\n  cex = 0.9\n)\n\n\n\n\n\n\n\n\n\nBased on the investigated variables, since 1990, we can create a dendrogram that groups countries based on their average demographic and economic characteristics since 1990. At the top level, Nigeria stands alone, emphasizing its unique high fertility and low income in the dataset. India, South Africa, Poland, and Brazil form a second group of countries, being the middle-income developing economies, though their fertility rates vary. To the right, USA and China are grouped together (reflecting similar overall averages despite very different trajectories). Finally, Canada, Sweden, Australia, Germany, Japan, and South Korea form the tightest cluster, having advanced economies with very low fertility and strong labor-force attachment. We thus see a very familiar pattern: - High-fertility, lower-income countries group together - Middle-income transitional economies group together - Low-fertility, high-income economies group together NOTE: The method mostly takes into account similarity in averaged levels, not trends, so countries that exhibit similar averages over time (e.g.¬†Japan and South Korea) are grouped tightly even if their historical patterns differ.",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#deep-dive-south-korea",
    "href": "results.html#deep-dive-south-korea",
    "title": "3¬† Results",
    "section": "3.5 Deep dive: South Korea",
    "text": "3.5 Deep dive: South Korea\n\n\nCode\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(patchwork)\n\n### ---------------------------\n\n### 1. Fertility Rate (Korea)\n\n### ---------------------------\n\nkorea_fert &lt;- master_long |&gt;\nfilter(country == \"KOR\", variable == \"fertility_rate\") |&gt;\nleft_join(country_lookup, by = \"country\")\n\np_fert_kor &lt;- ggplot(korea_fert, aes(x = year, y = value)) +\ngeom_hline(yintercept = 2.1, linetype = \"dashed\", color = \"grey50\") +\ngeom_line(color = \"#2c7fb8\", linewidth = 1) +\nscale_y_continuous(\"Fertility rate\", limits = c(0, NA)) +\nscale_x_continuous(\"Year\", breaks = seq(1960, 2020, by = 10)) +\ntheme_minimal(base_size = 12) +\nlabs(title = \"Fertility Rate\")\n\n### ---------------------------\n\n### 2. GDP per capita (Korea)\n\n### ---------------------------\n\nkorea_gdp &lt;- master_long |&gt;\nfilter(country == \"KOR\", variable == \"gdp_capita_const\") |&gt;\nleft_join(country_lookup, by = \"country\")\n\np_gdp_kor &lt;- ggplot(korea_gdp, aes(x = year, y = value)) +\ngeom_line(color = \"#1b9e77\", linewidth = 1) +\nscale_y_log10(\n\"GDP per capita (log scale)\",\nlabels = scales::label_number(scale_cut = scales::cut_si(\"\"))\n) +\nscale_x_continuous(\"Year\", breaks = seq(1960, 2020, by = 10)) +\ntheme_minimal(base_size = 12) +\nlabs(title = \"Economic Growth\")\n\n### ---------------------------\n\n### 3. Labor Market Trends (z-scored)\n\n### ---------------------------\n\nkorea_labor &lt;- master_long |&gt;\nfilter(country == \"KOR\", variable %in% c(\"flfpr\", \"emp_to_pop\")) |&gt;\nselect(country, year, variable, value) |&gt;\ntidyr::pivot_wider(names_from = variable, values_from = value) |&gt;\nfilter(!is.na(flfpr), !is.na(emp_to_pop)) |&gt;\nmutate(\nflfpr_z = scale(flfpr)[, 1],\nemp_z   = scale(emp_to_pop)[, 1]\n) |&gt;\ntidyr::pivot_longer(\ncols = c(flfpr_z, emp_z),\nnames_to = \"series\",\nvalues_to = \"z_value\"\n) |&gt;\nmutate(\nseries = dplyr::recode(\nseries,\nflfpr_z = \"Female labor force participation (z)\",\nemp_z   = \"Employment-to-population (z)\"\n)\n)\n\np_labor_kor &lt;- ggplot(korea_labor, aes(x = year, y = z_value, color = series)) +\ngeom_line(linewidth = 1) +\nscale_color_manual(\nvalues = c(\n\"Female labor force participation (z)\" = \"#d95f02\",\n\"Employment-to-population (z)\"         = \"#7570b3\"\n),\nname = \"\"\n) +\nscale_x_continuous(\"Year\", breaks = seq(1990, 2020, by = 10)) +\ntheme_minimal(base_size = 12) +\nlabs(\ntitle = \"Labor Market Trends\",\ny = \"Standardized level\"\n) +\ntheme(legend.position = \"bottom\")\n\n### --------------------------------------------\n\n### 4. Migration & Population Growth (Percent)\n\n### --------------------------------------------\n\nkorea_popmig &lt;- master_long |&gt;\nfilter(country == \"KOR\", variable %in% c(\"total_population\", \"net_migration\")) |&gt;\nselect(country, year, variable, value) |&gt;\ntidyr::pivot_wider(names_from = variable, values_from = value) |&gt;\narrange(year) |&gt;\nmutate(\npop_growth_pct = (total_population - dplyr::lag(total_population)) /\ndplyr::lag(total_population) * 100,\nmig_pct = net_migration / total_population * 100\n) |&gt;\nfilter(!is.na(pop_growth_pct))\n\nkorea_popmig_long &lt;- korea_popmig |&gt;\ntidyr::pivot_longer(\ncols = c(mig_pct, pop_growth_pct),\nnames_to = \"series\",\nvalues_to = \"value\"\n) |&gt;\nmutate(\nseries = dplyr::recode(\nseries,\nmig_pct        = \"Net migration (% of population)\",\npop_growth_pct = \"Population growth (%)\"\n)\n)\n\np_popmig_kor &lt;- ggplot(korea_popmig_long, aes(x = year, y = value, color = series)) +\ngeom_line(linewidth = 1) +\nscale_color_manual(\nvalues = c(\n\"Net migration (% of population)\" = \"#1b9e77\",\n\"Population growth (%)\"           = \"#e7298a\"\n),\nname = \"\"\n) +\ntheme_minimal(base_size = 12) +\nscale_x_continuous(\"Year\", breaks = seq(1960, 2020, by = 10)) +\nlabs(\ntitle = \"Migration & Population Growth\",\ny = \"Percent\"\n)\n\n### ---------------------------\n\n### 5. Patchwork layout\n\n### ---------------------------\n\n(p_fert_kor | p_gdp_kor) /\n(p_labor_kor | p_popmig_kor)\n\n\n\n\n\n\n\n\n\nSouth Korea constitutes a very interesting case, fertility-wise. Within 60 years, the country went from a very high fertility of 6 births per woman to a tragic rate below 1. With less than half the replacement rate, it is no surprise that the country‚Äôs population growth rate has been steadily falling. With an increase in net migration since the 2010s, we see continuous decrease in population growth, indicating that there is not enough intake of people to offset the ‚Äòdying-off‚Äô of the population. As the case with many other countries, Korea‚Äôs economy has been growing quickly. Moreover, it has been seeing a irregular upward trend in terms of its employment-to-population ratio, and the female labor force participation rate.",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#deep-dive-india",
    "href": "results.html#deep-dive-india",
    "title": "3¬† Results",
    "section": "3.6 Deep dive: India",
    "text": "3.6 Deep dive: India\n\n\nCode\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(patchwork)\n\n# ---------------------------\n# 1. Fertility Rate (India)\n# ---------------------------\n\nindia_fert &lt;- master_long |&gt;\n  filter(country == \"IND\", variable == \"fertility_rate\") |&gt;\n  left_join(country_lookup, by = \"country\")\n\np_fert_ind &lt;- ggplot(india_fert, aes(x = year, y = value)) +\n  geom_hline(yintercept = 2.1, linetype = \"dashed\", color = \"grey50\") +\n  geom_line(color = \"#2c7fb8\", linewidth = 1) +\n  scale_y_continuous(\"Fertility rate\", limits = c(0, NA)) +\n  scale_x_continuous(\"Year\", breaks = seq(1960, 2020, by = 10)) +\n  theme_minimal(base_size = 12) +\n  labs(title = \"Fertility Rate\")\n\n# ---------------------------\n# 2. GDP per capita (India)\n# ---------------------------\n\nindia_gdp &lt;- master_long |&gt;\n  filter(country == \"IND\", variable == \"gdp_capita_const\") |&gt;\n  left_join(country_lookup, by = \"country\")\n\np_gdp_ind &lt;- ggplot(india_gdp, aes(x = year, y = value)) +\n  geom_line(color = \"#1b9e77\", linewidth = 1) +\n  scale_y_log10(\n    \"GDP per capita (log scale)\",\n    labels = scales::label_number(scale_cut = scales::cut_si(\"\"))\n  ) +\n  scale_x_continuous(\"Year\", breaks = seq(1960, 2020, by = 10)) +\n  theme_minimal(base_size = 12) +\n  labs(title = \"Economic Growth\")\n\n# ---------------------------\n# 3. Labor Market Trends (z)\n# ---------------------------\n\nindia_labor &lt;- master_long |&gt;\n  filter(country == \"IND\", variable %in% c(\"flfpr\", \"emp_to_pop\")) |&gt;\n  select(country, year, variable, value) |&gt;\n  tidyr::pivot_wider(names_from = variable, values_from = value) |&gt;\n  filter(!is.na(flfpr), !is.na(emp_to_pop)) |&gt;\n  mutate(\n    flfpr_z = scale(flfpr)[, 1],\n    emp_z   = scale(emp_to_pop)[, 1]\n  ) |&gt;\n  tidyr::pivot_longer(\n    cols = c(flfpr_z, emp_z),\n    names_to = \"series\",\n    values_to = \"z_value\"\n  ) |&gt;\n  mutate(\n    series = dplyr::recode(\n      series,\n      flfpr_z = \"Female labor force participation (z)\",\n      emp_z   = \"Employment-to-population (z)\"\n    )\n  )\n\np_labor_ind &lt;- ggplot(india_labor, aes(x = year, y = z_value, color = series)) +\n  geom_line(linewidth = 1) +\n  scale_color_manual(\n    values = c(\n      \"Female labor force participation (z)\" = \"#d95f02\",\n      \"Employment-to-population (z)\"         = \"#7570b3\"\n    ),\n    name = \"\"\n  ) +\n  scale_x_continuous(\"Year\", breaks = seq(1990, 2020, by = 10)) +\n  theme_minimal(base_size = 12) +\n  labs(\n    title = \"Labor Market Trends\",\n    y = \"Standardized level\"\n  ) +\n  theme(legend.position = \"bottom\")\n\n# --------------------------------------------\n# 4. Migration & Population Growth (Percent)\n# --------------------------------------------\n\nindia_popmig &lt;- master_long |&gt;\n  filter(country == \"IND\", variable %in% c(\"total_population\", \"net_migration\")) |&gt;\n  select(country, year, variable, value) |&gt;\n  tidyr::pivot_wider(names_from = variable, values_from = value) |&gt;\n  arrange(year) |&gt;\n  mutate(\n    pop_growth_pct = (total_population - dplyr::lag(total_population)) /\n                     dplyr::lag(total_population) * 100,\n    mig_pct = net_migration / total_population * 100\n  ) |&gt;\n  filter(!is.na(pop_growth_pct))\n\nindia_popmig_long &lt;- india_popmig |&gt;\n  tidyr::pivot_longer(\n    cols = c(mig_pct, pop_growth_pct),\n    names_to = \"series\",\n    values_to = \"value\"\n  ) |&gt;\n  mutate(\n    series = dplyr::recode(\n      series,\n      mig_pct        = \"Net migration (% of population)\",\n      pop_growth_pct = \"Population growth (%)\"\n    )\n  )\n\np_popmig_ind &lt;- ggplot(india_popmig_long, aes(x = year, y = value, color = series)) +\n  geom_line(linewidth = 1) +\n  scale_color_manual(\n    values = c(\n      \"Net migration (% of population)\" = \"#1b9e77\",\n      \"Population growth (%)\"           = \"#e7298a\"\n    ),\n    name = \"\"\n  ) +\n  theme_minimal(base_size = 12) +\n  scale_x_continuous(\"Year\", breaks = seq(1960, 2020, by = 10)) +\n  labs(\n    title = \"Migration & Population Growth\",\n    y = \"Percent\"\n  )\n\n# ---------------------------\n# 5. Patchwork layout\n# ---------------------------\n\n(p_fert_ind | p_gdp_ind) /\n(p_labor_ind | p_popmig_ind)\n\n\n\n\n\n\n\n\n\nIndia only fell below replacement rate in terms of its fertility recently. It has been seeing a steady decrease in this rate since 1960. This, following worldwide trends, is accompanied by rapid economic growth. Despite the recent dip below 2.1 in fertility, the population has still been growing, though at a continuously slower rate. There has not yet been enough time since the fertility rate dropping below replacement rate for the deaths to surpass births and cause a shrinkage in the population. With such a high fertility over time, India has had near-zero net migration, which had minimal effect on its total population. Curiously, labor market trends are volatile, with a significant crash in employment-to-population ratio and female labor force participation rate in the mid-2000s, only showing signs of recovery post-2020.",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#deep-dive-poland",
    "href": "results.html#deep-dive-poland",
    "title": "3¬† Results",
    "section": "3.7 Deep dive: Poland",
    "text": "3.7 Deep dive: Poland\n\n\nCode\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(patchwork)\n\n# ---------------------------\n# 1. Fertility Rate (Poland)\n# ---------------------------\n\npoland_fert &lt;- master_long |&gt;\n  filter(country == \"POL\", variable == \"fertility_rate\") |&gt;\n  left_join(country_lookup, by = \"country\")\n\np_fert_pol &lt;- ggplot(poland_fert, aes(x = year, y = value)) +\n  geom_hline(yintercept = 2.1, linetype = \"dashed\", color = \"grey50\") +\n  geom_line(color = \"#2c7fb8\", linewidth = 1) +\n  scale_y_continuous(\"Fertility rate\", limits = c(0, NA)) +\n  scale_x_continuous(\"Year\", breaks = seq(1960, 2020, by = 10)) +\n  theme_minimal(base_size = 12) +\n  labs(title = \"Fertility Rate\")\n\n# ---------------------------\n# 2. GDP per capita (Poland)\n# ---------------------------\n\npoland_gdp &lt;- master_long |&gt;\n  filter(country == \"POL\", variable == \"gdp_capita_const\") |&gt;\n  left_join(country_lookup, by = \"country\")\n\np_gdp_pol &lt;- ggplot(poland_gdp, aes(x = year, y = value)) +\n  geom_line(color = \"#1b9e77\", linewidth = 1) +\n  scale_y_log10(\n    \"GDP per capita (log scale)\",\n    labels = scales::label_number(scale_cut = scales::cut_si(\"\"))\n  ) +\n  scale_x_continuous(\"Year\", breaks = seq(1960, 2020, by = 10)) +\n  theme_minimal(base_size = 12) +\n  labs(title = \"Economic Growth\")\n\n# ---------------------------\n# 3. Labor Market Trends (z)\n# ---------------------------\n\npoland_labor &lt;- master_long |&gt;\n  filter(country == \"POL\", variable %in% c(\"flfpr\", \"emp_to_pop\")) |&gt;\n  select(country, year, variable, value) |&gt;\n  tidyr::pivot_wider(names_from = variable, values_from = value) |&gt;\n  filter(!is.na(flfpr), !is.na(emp_to_pop)) |&gt;\n  mutate(\n    flfpr_z = scale(flfpr)[, 1],\n    emp_z   = scale(emp_to_pop)[, 1]\n  ) |&gt;\n  tidyr::pivot_longer(\n    cols = c(flfpr_z, emp_z),\n    names_to = \"series\",\n    values_to = \"z_value\"\n  ) |&gt;\n  mutate(\n    series = dplyr::recode(\n      series,\n      flfpr_z = \"Female labor force participation (z)\",\n      emp_z   = \"Employment-to-population (z)\"\n    )\n  )\n\np_labor_pol &lt;- ggplot(poland_labor, aes(x = year, y = z_value, color = series)) +\n  geom_line(linewidth = 1) +\n  scale_color_manual(\n    values = c(\n      \"Female labor force participation (z)\" = \"#d95f02\",\n      \"Employment-to-population (z)\"         = \"#7570b3\"\n    ),\n    name = \"\"\n  ) +\n  scale_x_continuous(\"Year\", breaks = seq(1990, 2020, by = 10)) +\n  theme_minimal(base_size = 12) +\n  labs(\n    title = \"Labor Market Trends\",\n    y = \"Standardized level\"\n  ) +\n  theme(legend.position = \"bottom\")\n\n# --------------------------------------------\n# 4. Migration & Population Growth (Percent)\n# --------------------------------------------\n\npoland_popmig &lt;- master_long |&gt;\n  filter(country == \"POL\", variable %in% c(\"total_population\", \"net_migration\")) |&gt;\n  select(country, year, variable, value) |&gt;\n  tidyr::pivot_wider(names_from = variable, values_from = value) |&gt;\n  arrange(year) |&gt;\n  mutate(\n    pop_growth_pct = (total_population - dplyr::lag(total_population)) /\n                     dplyr::lag(total_population) * 100,\n    mig_pct = net_migration / total_population * 100\n  ) |&gt;\n  filter(!is.na(pop_growth_pct))\n\npoland_popmig_long &lt;- poland_popmig |&gt;\n  tidyr::pivot_longer(\n    cols = c(mig_pct, pop_growth_pct),\n    names_to = \"series\",\n    values_to = \"value\"\n  ) |&gt;\n  mutate(\n    series = dplyr::recode(\n      series,\n      mig_pct        = \"Net migration (% of population)\",\n      pop_growth_pct = \"Population growth (%)\"\n    )\n  )\n\np_popmig_pol &lt;- ggplot(poland_popmig_long, aes(x = year, y = value, color = series)) +\n  geom_line(linewidth = 1) +\n  scale_color_manual(\n    values = c(\n      \"Net migration (% of population)\" = \"#1b9e77\",\n      \"Population growth (%)\"           = \"#e7298a\"\n    ),\n    name = \"\"\n  ) +\n  theme_minimal(base_size = 12) +\n  scale_x_continuous(\"Year\", breaks = seq(1960, 2020, by = 10)) +\n  labs(\n    title = \"Migration & Population Growth\",\n    y = \"Percent\"\n  )\n\n# ---------------------------\n# 5. Patchwork layout\n# ---------------------------\n\n(p_fert_pol | p_gdp_pol) /\n(p_labor_pol | p_popmig_pol)\n\n\n\n\n\n\n\n\n\nPoland, with its tumultous post-WWII story, exhibits yet another interesting case. After the fall of the communist regime in 1989, the birth rate that oscillated around 2.2 throughout the 1970s and 1980s fell down to around 1.3 in the span of 10 years. Unsurprisingly, its economy has been growing at a quick pace since then. The labor market trends reveal the transition to a free economy: it did not happen overnight, with many people keeping their jobs from the communist era well into the 90s, with the employment-to-population ratio continuously falling, before a significant rebound and further growth post-2008. Since 1960, Poland has been experiencing negative net migration, though it was stable at around -0.2%. The country is known for not being a common immigration destination, yet we see two spikes in the net migration graph: 2010 (ca. +0.35%), and 2022 - the latter being a result of the intake of Ukrainian refugees. In terms of population growth: Poland has been shrinking since 2000, with a significant decrease in its population around the outbreak of the COVID-19 pandemic.",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#deep-dive-nigeria",
    "href": "results.html#deep-dive-nigeria",
    "title": "3¬† Results",
    "section": "3.8 Deep dive: Nigeria",
    "text": "3.8 Deep dive: Nigeria\n\n\nCode\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(patchwork)\n\n# ---------------------------\n# 1. Fertility Rate (Nigeria)\n# ---------------------------\n\nnigeria_fert &lt;- master_long |&gt;\n  filter(country == \"NGA\", variable == \"fertility_rate\") |&gt;\n  left_join(country_lookup, by = \"country\")\n\np_fert_nga &lt;- ggplot(nigeria_fert, aes(x = year, y = value)) +\n  geom_hline(yintercept = 2.1, linetype = \"dashed\", color = \"grey50\") +\n  geom_line(color = \"#2c7fb8\", linewidth = 1) +\n  scale_y_continuous(\"Fertility rate\", limits = c(0, NA)) +\n  scale_x_continuous(\"Year\", breaks = seq(1960, 2020, by = 10)) +\n  theme_minimal(base_size = 12) +\n  labs(title = \"Fertility Rate\")\n\n# ---------------------------\n# 2. GDP per capita (Nigeria)\n# ---------------------------\n\nnigeria_gdp &lt;- master_long |&gt;\n  filter(country == \"NGA\", variable == \"gdp_capita_const\") |&gt;\n  left_join(country_lookup, by = \"country\")\n\np_gdp_nga &lt;- ggplot(nigeria_gdp, aes(x = year, y = value)) +\n  geom_line(color = \"#1b9e77\", linewidth = 1) +\n  scale_y_log10(\n    \"GDP per capita (log scale)\",\n    labels = scales::label_number(scale_cut = scales::cut_si(\"\"))\n  ) +\n  scale_x_continuous(\"Year\", breaks = seq(1960, 2020, by = 10)) +\n  theme_minimal(base_size = 12) +\n  labs(title = \"Economic Growth\")\n\n# ---------------------------\n# 3. Labor Market Trends (z)\n# ---------------------------\n\nnigeria_labor &lt;- master_long |&gt;\n  filter(country == \"NGA\", variable %in% c(\"flfpr\", \"emp_to_pop\")) |&gt;\n  select(country, year, variable, value) |&gt;\n  tidyr::pivot_wider(names_from = variable, values_from = value) |&gt;\n  filter(!is.na(flfpr), !is.na(emp_to_pop)) |&gt;\n  mutate(\n    flfpr_z = scale(flfpr)[, 1],\n    emp_z   = scale(emp_to_pop)[, 1]\n  ) |&gt;\n  tidyr::pivot_longer(\n    cols = c(flfpr_z, emp_z),\n    names_to = \"series\",\n    values_to = \"z_value\"\n  ) |&gt;\n  mutate(\n    series = dplyr::recode(\n      series,\n      flfpr_z = \"Female labor force participation (z)\",\n      emp_z   = \"Employment-to-population (z)\"\n    )\n  )\n\np_labor_nga &lt;- ggplot(nigeria_labor, aes(x = year, y = z_value, color = series)) +\n  geom_line(linewidth = 1) +\n  scale_color_manual(\n    values = c(\n      \"Female labor force participation (z)\" = \"#d95f02\",\n      \"Employment-to-population (z)\"         = \"#7570b3\"\n    ),\n    name = \"\"\n  ) +\n  scale_x_continuous(\"Year\", breaks = seq(1990, 2020, by = 10)) +\n  theme_minimal(base_size = 12) +\n  labs(\n    title = \"Labor Market Trends\",\n    y = \"Standardized level\"\n  ) +\n  theme(legend.position = \"bottom\")\n\n# --------------------------------------------\n# 4. Migration & Population Growth (Percent)\n# --------------------------------------------\n\nnigeria_popmig &lt;- master_long |&gt;\n  filter(country == \"NGA\", variable %in% c(\"total_population\", \"net_migration\")) |&gt;\n  select(country, year, variable, value) |&gt;\n  tidyr::pivot_wider(names_from = variable, values_from = value) |&gt;\n  arrange(year) |&gt;\n  mutate(\n    pop_growth_pct = (total_population - dplyr::lag(total_population)) /\n                     dplyr::lag(total_population) * 100,\n    mig_pct = net_migration / total_population * 100\n  ) |&gt;\n  filter(!is.na(pop_growth_pct))\n\nnigeria_popmig_long &lt;- nigeria_popmig |&gt;\n  tidyr::pivot_longer(\n    cols = c(mig_pct, pop_growth_pct),\n    names_to = \"series\",\n    values_to = \"value\"\n  ) |&gt;\n  mutate(\n    series = dplyr::recode(\n      series,\n      mig_pct        = \"Net migration (% of population)\",\n      pop_growth_pct = \"Population growth (%)\"\n    )\n  )\n\np_popmig_nga &lt;- ggplot(nigeria_popmig_long, aes(x = year, y = value, color = series)) +\n  geom_line(linewidth = 1) +\n  scale_color_manual(\n    values = c(\n      \"Net migration (% of population)\" = \"#1b9e77\",\n      \"Population growth (%)\"           = \"#e7298a\"\n    ),\n    name = \"\"\n  ) +\n  theme_minimal(base_size = 12) +\n  scale_x_continuous(\"Year\", breaks = seq(1960, 2020, by = 10)) +\n  labs(\n    title = \"Migration & Population Growth\",\n    y = \"Percent\"\n  )\n\n# ---------------------------\n# 5. Patchwork layout\n# ---------------------------\n\n(p_fert_nga | p_gdp_nga) /\n(p_labor_nga | p_popmig_nga)\n\n\n\n\n\n\n\n\n\nOut of all the investigated countries, Nigeria is the biggest outlier in terms of its fertility rate. Consistently high, even reaching 7 births per woman in the late 1970s. Despite it decreasing steadily since, it still remains very high, above 4 births per woman. Thus, the population has been growing at a relatively stable rate, between 2 and 3.2% per year. Nigeria is also not regarded a common immigration destination, and it‚Äôs net migration levels have oscilated around 0 since 1960, with one significant dip in the 1980s. The country‚Äôs economy has had ups and downs since 1960s, only recently reaching the same level it had in the 1970s. Curiously, there has been a significant spike in its employment-to-population ratio and the female labor participation rate this decade.",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "conclusion.html",
    "href": "conclusion.html",
    "title": "4¬† Conclusion",
    "section": "",
    "text": "This exploration revealed several broad patterns that held across most of the 13 countries in the dataset: Fertility rates have declined everywhere since 1960, while GDP per capita has been rising globally, more or less steadily in more countries. The relationship between these two variables is consistently negative, even when countries follow different paths. Nevertheless, none of the other investigated socio-economic factors have proven to be significant predictors of fertility rates. Considering the individual trajectories (i.e., South Korea‚Äôs rapid economic rise and fertility collapse, or Nigeria‚Äôs combination of GDP volatility and high fertility), we cannot state that GDP growth is a driving factor when it comes to fertility rates. Rather, the investigation illustrates that the drivers of demographic change are more complicated than any single economic indicator can explain.\nThere are several caveats to the project when it comes to interpreting the findings: Firstly, our country set is selective and not representative of the entire world. Extrapolating patterns from these countries to others, especially low-income or politically unstable ones, must be done with caution and consideration. Second, many of the indicators come from different (but rather reliable) sources and begin in different years, while some (like FLFPR) have short time spans. Third, the analysis is only exploratory: although some relationships might look suggestive, and be correlated, none of the observed patterns should be interpreted as causal. For one, even though fertility tends to decline as GDP per capita rises, the paths for South Africa and Nigeria remind us that short term macroeconomic swings do not translate immediately to significant demographic shifts.\nThere are also limitations to the data we chose, and they constrained what we could do. With net migration being noisy for some countries, and behaving erratically sometimes, we didn‚Äôt have full historical context for the analyzed countries to know what caused unpredicted spikes. Moreover, fertility and GDP are available on long timescales, but labor metrics begin only in the early 1990s, making long-run comparisons between these impossible. We would have benefited from socio-economic data, such as urbanization rates or education levels, because there are multiple plausible explanations for fertility decline.\nHad we had more time or data, there are several directions we would pursue: - Expanding beyond the 13-country sample to see if the patterns we observe are parts of broader regional clusters. - Integrating policy variables, such as parental leave, childcare subsidies, or family planning laws - Investigating more detailed migration data, distinguishing between permanent, temporary, and asylum flows to better understand how migration contributes to population growth in countries below replacement fertility.\nDuring the investigation, we were surprised with how consistent the long-run decline in fertility has been between countries with vastly different locations, cultures, histories, and economic trajectories. We also expected to see clearer relationships between fertility and labor-market variables, but the data showed little uniformity: in some countries, rising female labor force participation rates coincided with falling fertility, while in others, the two moved in the same direction. These inconsistencies showed us an important takeaway: visual patterns appear simple at first, but they often mask complex, country-specific mechanisms underneath.\nThis project reinforced to us the value and limits of exploratory visualization. We uncovered broad structural patterns and country-level changes that would have been hard to see otherwise, but we were also reminded that demographic change is shaped by multiple factors beyond the economic indicators typically plotted in cross-country charts.\nThe questions raised by our graphs suggest multiple paths for deeper analysis, but even at this exploratory stage, the results give a clearer picture of how economic development and population dynamics have evolved together, and diverged, over the past six decades.",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Conclusion</span>"
    ]
  }
]